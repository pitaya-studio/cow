// jquery.cookie
(function ($, document) { var pluses = /\+/g; function raw(s) { return s } function decoded(s) { return decodeURIComponent(s.replace(pluses, ' ')) } $.cookie = function (key, value, options) { if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value == null)) { options = $.extend({}, $.cookie.defaults, options); if (value == null) { options.expires = -1 } if (typeof options.expires === 'number') { var days = options.expires, t = options.expires = new Date(); t.setDate(t.getDate() + days) } value = String(value); return (document.cookie = [encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join('')) } options = value || $.cookie.defaults || {}; var decode = options.raw ? raw : decoded; var cookies = document.cookie.split('; '); for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')) ; i++) { if (decode(parts.shift()) === key) { return decode(parts.join('=')) } } return null }; $.cookie.defaults = {} })(jQuery, document);

// jquery.easing
jQuery.easing['jswing'] = jQuery.easing['swing']; jQuery.extend(jQuery.easing, { def: 'easeOutQuad', swing: function (x, t, b, c, d) { return jQuery.easing[jQuery.easing.def](x, t, b, c, d) }, easeInQuad: function (x, t, b, c, d) { return c * (t /= d) * t + b }, easeOutQuad: function (x, t, b, c, d) { return -c * (t /= d) * (t - 2) + b }, easeInOutQuad: function (x, t, b, c, d) { if ((t /= d / 2) < 1) return c / 2 * t * t + b; return -c / 2 * ((--t) * (t - 2) - 1) + b }, easeInCubic: function (x, t, b, c, d) { return c * (t /= d) * t * t + b }, easeOutCubic: function (x, t, b, c, d) { return c * ((t = t / d - 1) * t * t + 1) + b }, easeInOutCubic: function (x, t, b, c, d) { if ((t /= d / 2) < 1) return c / 2 * t * t * t + b; return c / 2 * ((t -= 2) * t * t + 2) + b }, easeInQuart: function (x, t, b, c, d) { return c * (t /= d) * t * t * t + b }, easeOutQuart: function (x, t, b, c, d) { return -c * ((t = t / d - 1) * t * t * t - 1) + b }, easeInOutQuart: function (x, t, b, c, d) { if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b; return -c / 2 * ((t -= 2) * t * t * t - 2) + b }, easeInQuint: function (x, t, b, c, d) { return c * (t /= d) * t * t * t * t + b }, easeOutQuint: function (x, t, b, c, d) { return c * ((t = t / d - 1) * t * t * t * t + 1) + b }, easeInOutQuint: function (x, t, b, c, d) { if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b; return c / 2 * ((t -= 2) * t * t * t * t + 2) + b }, easeInSine: function (x, t, b, c, d) { return -c * Math.cos(t / d * (Math.PI / 2)) + c + b }, easeOutSine: function (x, t, b, c, d) { return c * Math.sin(t / d * (Math.PI / 2)) + b }, easeInOutSine: function (x, t, b, c, d) { return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b }, easeInExpo: function (x, t, b, c, d) { return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b }, easeOutExpo: function (x, t, b, c, d) { return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b }, easeInOutExpo: function (x, t, b, c, d) { if (t == 0) return b; if (t == d) return b + c; if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b; return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b }, easeInCirc: function (x, t, b, c, d) { return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b }, easeOutCirc: function (x, t, b, c, d) { return c * Math.sqrt(1 - (t = t / d - 1) * t) + b }, easeInOutCirc: function (x, t, b, c, d) { if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b; return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b }, easeInElastic: function (x, t, b, c, d) { var s = 1.70158; var p = 0; var a = c; if (t == 0) return b; if ((t /= d) == 1) return b + c; if (!p) p = d * .3; if (a < Math.abs(c)) { a = c; var s = p / 4 } else var s = p / (2 * Math.PI) * Math.asin(c / a); return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b }, easeOutElastic: function (x, t, b, c, d) { var s = 1.70158; var p = 0; var a = c; if (t == 0) return b; if ((t /= d) == 1) return b + c; if (!p) p = d * .3; if (a < Math.abs(c)) { a = c; var s = p / 4 } else var s = p / (2 * Math.PI) * Math.asin(c / a); return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b }, easeInOutElastic: function (x, t, b, c, d) { var s = 1.70158; var p = 0; var a = c; if (t == 0) return b; if ((t /= d / 2) == 2) return b + c; if (!p) p = d * (.3 * 1.5); if (a < Math.abs(c)) { a = c; var s = p / 4 } else var s = p / (2 * Math.PI) * Math.asin(c / a); if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b; return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b }, easeInBack: function (x, t, b, c, d, s) { if (s == undefined) s = 1.70158; return c * (t /= d) * t * ((s + 1) * t - s) + b }, easeOutBack: function (x, t, b, c, d, s) { if (s == undefined) s = 1.70158; return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b }, easeInOutBack: function (x, t, b, c, d, s) { if (s == undefined) s = 1.70158; if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b; return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b }, easeInBounce: function (x, t, b, c, d) { return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b }, easeOutBounce: function (x, t, b, c, d) { if ((t /= d) < (1 / 2.75)) { return c * (7.5625 * t * t) + b } else if (t < (2 / 2.75)) { return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b } else if (t < (2.5 / 2.75)) { return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b } else { return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b } }, easeInOutBounce: function (x, t, b, c, d) { if (t < d / 2) return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b; return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b } });

// jquery.mousewheel
(function (factory) { if (typeof define === 'function' && define.amd) { define(['jquery'], factory) } else { factory(jQuery) } }(function ($) { var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll']; var toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll']; var lowestDelta, lowestDeltaXY; if ($.event.fixHooks) { for (var i = toFix.length; i;) { $.event.fixHooks[toFix[--i]] = $.event.mouseHooks } } $.event.special.mousewheel = { setup: function () { if (this.addEventListener) { for (var i = toBind.length; i;) { this.addEventListener(toBind[--i], handler, false) } } else { this.onmousewheel = handler } }, teardown: function () { if (this.removeEventListener) { for (var i = toBind.length; i;) { this.removeEventListener(toBind[--i], handler, false) } } else { this.onmousewheel = null } } }; $.fn.extend({ mousewheel: function (fn) { return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel") }, unmousewheel: function (fn) { return this.unbind("mousewheel", fn) } }); function handler(event) { var orgEvent = event || window.event, args = [].slice.call(arguments, 1), delta = 0, deltaX = 0, deltaY = 0, absDelta = 0, absDeltaXY = 0, fn; event = $.event.fix(orgEvent); event.type = "mousewheel"; if (orgEvent.wheelDelta) { delta = orgEvent.wheelDelta } if (orgEvent.detail) { delta = orgEvent.detail * -1 } if (orgEvent.deltaY) { deltaY = orgEvent.deltaY * -1; delta = deltaY } if (orgEvent.deltaX) { deltaX = orgEvent.deltaX; delta = deltaX * -1 } if (orgEvent.wheelDeltaY !== undefined) { deltaY = orgEvent.wheelDeltaY } if (orgEvent.wheelDeltaX !== undefined) { deltaX = orgEvent.wheelDeltaX * -1 } absDelta = Math.abs(delta); if (!lowestDelta || absDelta < lowestDelta) { lowestDelta = absDelta } absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX)); if (!lowestDeltaXY || absDeltaXY < lowestDeltaXY) { lowestDeltaXY = absDeltaXY } fn = delta > 0 ? 'floor' : 'ceil'; delta = Math[fn](delta / lowestDelta); deltaX = Math[fn](deltaX / lowestDeltaXY); deltaY = Math[fn](deltaY / lowestDeltaXY); args.unshift(event, delta, deltaX, deltaY); return ($.event.dispatch || $.event.handle).apply(this, args) } }));

// jquery.url
; (function ($, undefined) { var tag2attr = { a: 'href', img: 'src', form: 'action', base: 'href', script: 'src', iframe: 'src', link: 'href' }, key = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "fragment"], aliases = { "anchor": "fragment" }, parser = { strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/, loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/ }, querystring_parser = /(?:^|&|;)([^&=;]*)=?([^&;]*)/g, fragment_parser = /(?:^|&|;)([^&=;]*)=?([^&;]*)/g; function parseUri(url, strictMode) { var str = decodeURI(url), res = parser[strictMode || false ? "strict" : "loose"].exec(str), uri = { attr: {}, param: {}, seg: {} }, i = 14; while (i--) { uri.attr[key[i]] = res[i] || "" } uri.param['query'] = {}; uri.param['fragment'] = {}; uri.attr['query'].replace(querystring_parser, function ($0, $1, $2) { if ($1) { uri.param['query'][$1] = $2 } }); uri.attr['fragment'].replace(fragment_parser, function ($0, $1, $2) { if ($1) { uri.param['fragment'][$1] = $2 } }); uri.seg['path'] = uri.attr.path.replace(/^\/+|\/+$/g, '').split('/'); uri.seg['fragment'] = uri.attr.fragment.replace(/^\/+|\/+$/g, '').split('/'); uri.attr['base'] = uri.attr.host ? uri.attr.protocol + "://" + uri.attr.host + (uri.attr.port ? ":" + uri.attr.port : '') : ''; return uri }; function getAttrName(elm) { var tn = elm.tagName; if (tn !== undefined) return tag2attr[tn.toLowerCase()]; return tn } $.fn.url = function (strictMode) { var url = ''; if (this.length) { url = $(this).attr(getAttrName(this[0])) || '' } return $.url(url, strictMode) }; $.url = function (url, strictMode) { if (arguments.length === 1 && url === true) { strictMode = true; url = undefined } strictMode = strictMode || false; url = url || window.location.toString(); return { data: parseUri(url, strictMode), attr: function (attr) { attr = aliases[attr] || attr; return attr !== undefined ? this.data.attr[attr] : this.data.attr }, param: function (param) { return param !== undefined ? this.data.param.query[param] : this.data.param.query }, fparam: function (param) { return param !== undefined ? this.data.param.fragment[param] : this.data.param.fragment }, segment: function (seg) { if (seg === undefined) { return this.data.seg.path } else { seg = seg < 0 ? this.data.seg.path.length + seg : seg - 1; return this.data.seg.path[seg] } }, fsegment: function (seg) { if (seg === undefined) { return this.data.seg.fragment } else { seg = seg < 0 ? this.data.seg.fragment.length + seg : seg - 1; return this.data.seg.fragment[seg] } } } } })(jQuery);

// jquery.json2
var JSON; if (!JSON) { JSON = {} } (function () { 'use strict'; function f(n) { return n < 10 ? '0' + n : n } if (typeof Date.prototype.toJSON !== 'function') { Date.prototype.toJSON = function (key) { return isFinite(this.valueOf()) ? this.getUTCFullYear() + '-' + f(this.getUTCMonth() + 1) + '-' + f(this.getUTCDate()) + 'T' + f(this.getUTCHours()) + ':' + f(this.getUTCMinutes()) + ':' + f(this.getUTCSeconds()) + 'Z' : null }; String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function (key) { return this.valueOf() } } var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = { '\b': '\\b', '\t': '\\t', '\n': '\\n', '\f': '\\f', '\r': '\\r', '"': '\\"', '\\': '\\\\' }, rep; function quote(string) { escapable.lastIndex = 0; return escapable.test(string) ? '"' + string.replace(escapable, function (a) { var c = meta[a]; return typeof c === 'string' ? c : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4) }) + '"' : '"' + string + '"' } function str(key, holder) { var i, k, v, length, mind = gap, partial, value = holder[key]; if (value && typeof value === 'object' && typeof value.toJSON === 'function') { value = value.toJSON(key) } if (typeof rep === 'function') { value = rep.call(holder, key, value) } switch (typeof value) { case 'string': return quote(value); case 'number': return isFinite(value) ? String(value) : 'null'; case 'boolean': case 'null': return String(value); case 'object': if (!value) { return 'null' } gap += indent; partial = []; if (Object.prototype.toString.apply(value) === '[object Array]') { length = value.length; for (i = 0; i < length; i += 1) { partial[i] = str(i, value) || 'null' } v = partial.length === 0 ? '[]' : gap ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' : '[' + partial.join(',') + ']'; gap = mind; return v } if (rep && typeof rep === 'object') { length = rep.length; for (i = 0; i < length; i += 1) { if (typeof rep[i] === 'string') { k = rep[i]; v = str(k, value); if (v) { partial.push(quote(k) + (gap ? ': ' : ':') + v) } } } } else { for (k in value) { if (Object.prototype.hasOwnProperty.call(value, k)) { v = str(k, value); if (v) { partial.push(quote(k) + (gap ? ': ' : ':') + v) } } } } v = partial.length === 0 ? '{}' : gap ? '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' : '{' + partial.join(',') + '}'; gap = mind; return v } } if (typeof JSON.stringify !== 'function') { JSON.stringify = function (value, replacer, space) { var i; gap = ''; indent = ''; if (typeof space === 'number') { for (i = 0; i < space; i += 1) { indent += ' ' } } else if (typeof space === 'string') { indent = space } rep = replacer; if (replacer && typeof replacer !== 'function' && (typeof replacer !== 'object' || typeof replacer.length !== 'number')) { throw new Error('JSON.stringify') } return str('', { '': value }) } } if (typeof JSON.parse !== 'function') { JSON.parse = function (text, reviver) { var j; function walk(holder, key) { var k, v, value = holder[key]; if (value && typeof value === 'object') { for (k in value) { if (Object.prototype.hasOwnProperty.call(value, k)) { v = walk(value, k); if (v !== undefined) { value[k] = v } else { delete value[k] } } } } return reviver.call(holder, key, value) } text = String(text); cx.lastIndex = 0; if (cx.test(text)) { text = text.replace(cx, function (a) { return '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4) }) } if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']').replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) { j = eval('(' + text + ')'); return typeof reviver === 'function' ? walk({ '': j }, '') : j } throw new SyntaxError('JSON.parse') } } }());

// jquery.scrollTo
; (function ($) { var $scrollTo = $.scrollTo = function (target, duration, settings) { $(window).scrollTo(target, duration, settings) }; $scrollTo.defaults = { axis: 'xy', duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1 }; $scrollTo.window = function (scope) { return $(window)._scrollable() }; $.fn._scrollable = function () { return this.map(function () { var elem = this, isWin = !elem.nodeName || $.inArray(elem.nodeName.toLowerCase(), ['iframe', '#document', 'html', 'body']) != -1; if (!isWin) return elem; var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem; return $.browser.safari || doc.compatMode == 'BackCompat' ? doc.body : doc.documentElement }) }; $.fn.scrollTo = function (target, duration, settings) { if (typeof duration == 'object') { settings = duration; duration = 0 } if (typeof settings == 'function') settings = { onAfter: settings }; if (target == 'max') target = 9e9; settings = $.extend({}, $scrollTo.defaults, settings); duration = duration || settings.speed || settings.duration; settings.queue = settings.queue && settings.axis.length > 1; if (settings.queue) duration /= 2; settings.offset = both(settings.offset); settings.over = both(settings.over); return this._scrollable().each(function () { var elem = this, $elem = $(elem), targ = target, toff, attr = {}, win = $elem.is('html,body'); switch (typeof targ) { case 'number': case 'string': if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)) { targ = both(targ); break } targ = $(targ, this); case 'object': if (targ.is || targ.style) toff = (targ = $(targ)).offset() } $.each(settings.axis.split(''), function (i, axis) { var Pos = axis == 'x' ? 'Left' : 'Top', pos = Pos.toLowerCase(), key = 'scroll' + Pos, old = elem[key], max = $scrollTo.max(elem, axis); if (toff) { attr[key] = toff[pos] + (win ? 0 : old - $elem.offset()[pos]); if (settings.margin) { attr[key] -= parseInt(targ.css('margin' + Pos)) || 0; attr[key] -= parseInt(targ.css('border' + Pos + 'Width')) || 0 } attr[key] += settings.offset[pos] || 0; if (settings.over[pos]) attr[key] += targ[axis == 'x' ? 'width' : 'height']() * settings.over[pos] } else { var val = targ[pos]; attr[key] = val.slice && val.slice(-1) == '%' ? parseFloat(val) / 100 * max : val } if (/^\d+$/.test(attr[key])) attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max); if (!i && settings.queue) { if (old != attr[key]) animate(settings.onAfterFirst); delete attr[key] } }); animate(settings.onAfter); function animate(callback) { $elem.animate(attr, duration, settings.easing, callback && function () { callback.call(this, target, settings) }) } }).end() }; $scrollTo.max = function (elem, axis) { var Dim = axis == 'x' ? 'Width' : 'Height', scroll = 'scroll' + Dim; if (!$(elem).is('html,body')) return elem[scroll] - $(elem)[Dim.toLowerCase()](); var size = 'client' + Dim, html = elem.ownerDocument.documentElement, body = elem.ownerDocument.body; return Math.max(html[scroll], body[scroll]) - Math.min(html[size], body[size]) }; function both(val) { return typeof val == 'object' ? val : { top: val, left: val } } })(jQuery);

// jquery.corner
; (function ($) { var msie = /MSIE/.test(navigator.userAgent); var style = document.createElement('div').style, moz = style['MozBorderRadius'] !== undefined, webkit = style['WebkitBorderRadius'] !== undefined, radius = style['borderRadius'] !== undefined || style['BorderRadius'] !== undefined, mode = document.documentMode || 0, noBottomFold = msie && (!mode || mode < 8), expr = msie && (function () { var div = document.createElement('div'); try { div.style.setExpression('width', '0+0'); div.style.removeExpression('width') } catch (e) { return false } return true })(); $.support = $.support || {}; $.support.borderRadius = moz || webkit || radius; function sz(el, p) { return parseInt($.css(el, p), 10) || 0 } function hex2(s) { s = parseInt(s, 10).toString(16); return (s.length < 2) ? '0' + s : s } function gpc(node) { while (node) { var v = $.css(node, 'backgroundColor'), rgb; if (v && v != 'transparent' && v != 'rgba(0, 0, 0, 0)') { if (v.indexOf('rgb') >= 0) { rgb = v.match(/\d+/g); return '#' + hex2(rgb[0]) + hex2(rgb[1]) + hex2(rgb[2]) } return v } if (node.nodeName.toLowerCase() == 'html') break; node = node.parentNode; } return '#ffffff' } function getWidth(fx, i, width) { switch (fx) { case 'round': return Math.round(width * (1 - Math.cos(Math.asin(i / width)))); case 'cool': return Math.round(width * (1 + Math.cos(Math.asin(i / width)))); case 'sharp': return width - i; case 'bite': return Math.round(width * (Math.cos(Math.asin((width - i - 1) / width)))); case 'slide': return Math.round(width * (Math.atan2(i, width / i))); case 'jut': return Math.round(width * (Math.atan2(width, (width - i - 1)))); case 'curl': return Math.round(width * (Math.atan(i))); case 'tear': return Math.round(width * (Math.cos(i))); case 'wicked': return Math.round(width * (Math.tan(i))); case 'long': return Math.round(width * (Math.sqrt(i))); case 'sculpt': return Math.round(width * (Math.log((width - i - 1), width))); case 'dogfold': case 'dog': return (i & 1) ? (i + 1) : width; case 'dog2': return (i & 2) ? (i + 1) : width; case 'dog3': return (i & 3) ? (i + 1) : width; case 'fray': return (i % 2) * width; case 'notch': return width; case 'bevelfold': case 'bevel': return i + 1; case 'steep': return i / 2 + 1; case 'invsteep': return (width - i) / 2 + 1 } } $.fn.corner = function (options) { if (this.length === 0) { if (!$.isReady && this.selector) { var s = this.selector, c = this.context; $(function () { $(s, c).corner(options) }) } return this } return this.each(function (index) { var $this = $(this), o = [$this.attr($.fn.corner.defaults.metaAttr) || '', options || ''].join(' ').toLowerCase(), keep = /keep/.test(o), cc = ((o.match(/cc:(#[0-9a-f]+)/) || [])[1]), sc = ((o.match(/sc:(#[0-9a-f]+)/) || [])[1]), width = parseInt((o.match(/(\d+)px/) || [])[1], 10) || 10, re = /round|bevelfold|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dogfold|dog|invsteep|steep/, fx = ((o.match(re) || ['round'])[0]), fold = /dogfold|bevelfold/.test(o), edges = { T: 0, B: 1 }, opts = { TL: /top|tl|left/.test(o), TR: /top|tr|right/.test(o), BL: /bottom|bl|left/.test(o), BR: /bottom|br|right/.test(o) }, strip, pad, cssHeight, j, bot, d, ds, bw, i, w, e, c, common, $horz; if (!opts.TL && !opts.TR && !opts.BL && !opts.BR) opts = { TL: 1, TR: 1, BL: 1, BR: 1 }; if ($.fn.corner.defaults.useNative && fx == 'round' && (radius || moz || webkit) && !cc && !sc) { if (opts.TL) $this.css(radius ? 'border-top-left-radius' : moz ? '-moz-border-radius-topleft' : '-webkit-border-top-left-radius', width + 'px'); if (opts.TR) $this.css(radius ? 'border-top-right-radius' : moz ? '-moz-border-radius-topright' : '-webkit-border-top-right-radius', width + 'px'); if (opts.BL) $this.css(radius ? 'border-bottom-left-radius' : moz ? '-moz-border-radius-bottomleft' : '-webkit-border-bottom-left-radius', width + 'px'); if (opts.BR) $this.css(radius ? 'border-bottom-right-radius' : moz ? '-moz-border-radius-bottomright' : '-webkit-border-bottom-right-radius', width + 'px'); return } strip = document.createElement('div'); $(strip).css({ overflow: 'hidden', height: '1px', minHeight: '1px', fontSize: '1px', backgroundColor: sc || 'transparent', borderStyle: 'solid' }); pad = { T: parseInt($.css(this, 'paddingTop'), 10) || 0, R: parseInt($.css(this, 'paddingRight'), 10) || 0, B: parseInt($.css(this, 'paddingBottom'), 10) || 0, L: parseInt($.css(this, 'paddingLeft'), 10) || 0 }; if (typeof this.style.zoom !== undefined) this.style.zoom = 1; if (!keep) this.style.border = 'none'; strip.style.borderColor = cc || gpc(this.parentNode); cssHeight = $(this).outerHeight(); for (j in edges) { bot = edges[j]; if ((bot && (opts.BL || opts.BR)) || (!bot && (opts.TL || opts.TR))) { strip.style.borderStyle = 'none ' + (opts[j + 'R'] ? 'solid' : 'none') + ' none ' + (opts[j + 'L'] ? 'solid' : 'none'); d = document.createElement('div'); $(d).addClass('jquery-corner'); ds = d.style; bot ? this.appendChild(d) : this.insertBefore(d, this.firstChild); if (bot && cssHeight != 'auto') { if ($.css(this, 'position') == 'static') this.style.position = 'relative'; ds.position = 'absolute'; ds.bottom = ds.left = ds.padding = ds.margin = '0'; if (expr) ds.setExpression('width', 'this.parentNode.offsetWidth'); else ds.width = '100%' } else if (!bot && msie) { if ($.css(this, 'position') == 'static') this.style.position = 'relative'; ds.position = 'absolute'; ds.top = ds.left = ds.right = ds.padding = ds.margin = '0'; if (expr) { bw = sz(this, 'borderLeftWidth') + sz(this, 'borderRightWidth'); ds.setExpression('width', 'this.parentNode.offsetWidth - ' + bw + '+ "px"') } else ds.width = '100%' } else { ds.position = 'relative'; ds.margin = !bot ? '-' + pad.T + 'px -' + pad.R + 'px ' + (pad.T - width) + 'px -' + pad.L + 'px' : (pad.B - width) + 'px -' + pad.R + 'px -' + pad.B + 'px -' + pad.L + 'px' } for (i = 0; i < width; i++) { w = Math.max(0, getWidth(fx, i, width)); e = strip.cloneNode(false); e.style.borderWidth = '0 ' + (opts[j + 'R'] ? w : 0) + 'px 0 ' + (opts[j + 'L'] ? w : 0) + 'px'; bot ? d.appendChild(e) : d.insertBefore(e, d.firstChild) } if (fold && $.support.boxModel) { if (bot && noBottomFold) continue; for (c in opts) { if (!opts[c]) continue; if (bot && (c == 'TL' || c == 'TR')) continue; if (!bot && (c == 'BL' || c == 'BR')) continue; common = { position: 'absolute', border: 'none', margin: 0, padding: 0, overflow: 'hidden', backgroundColor: strip.style.borderColor }; $horz = $('<div/>').css(common).css({ width: width + 'px', height: '1px' }); switch (c) { case 'TL': $horz.css({ bottom: 0, left: 0 }); break; case 'TR': $horz.css({ bottom: 0, right: 0 }); break; case 'BL': $horz.css({ top: 0, left: 0 }); break; case 'BR': $horz.css({ top: 0, right: 0 }); break } d.appendChild($horz[0]); var $vert = $('<div/>').css(common).css({ top: 0, bottom: 0, width: '1px', height: width + 'px' }); switch (c) { case 'TL': $vert.css({ left: width }); break; case 'TR': $vert.css({ right: width }); break; case 'BL': $vert.css({ left: width }); break; case 'BR': $vert.css({ right: width }); break } d.appendChild($vert[0]) } } } } }) }; $.fn.uncorner = function () { if (radius || moz || webkit) this.css(radius ? 'border-radius' : moz ? '-moz-border-radius' : '-webkit-border-radius', 0); $('div.jquery-corner', this).remove(); return this }; $.fn.corner.defaults = { useNative: true, metaAttr: 'data-corner' } })(jQuery);

/*! JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 52 */
(function (n, t, i) { "use strict"; function bt(n) { return n } function bi(n) { return n } function kt(n) { e._dbgMode = n; vt = n ? "Error: #index in nested view: use #getIndex()" : ""; d("dbg", ei.dbg = lt.dbg = n ? bi : bt) } function dt(n) { return { getTgt: n, map: function (t) { var i = this, r; i.src !== t && (i.src && i.unmap(), typeof t == "object" && (r = n.apply(i, arguments), i.src = t, i.tgt = r)) } } } function ft(n, t) { t && t.onError && t.onError(n) === !1 || (this.name = "JsRender Error", this.message = n || "JsRender error") } function u(n, t) { var i; n = n || {}; for (i in t) n[i] = t[i]; return n } function gt(n, t, i) { return (!l.rTag || n) && (p = n ? n.charAt(0) : p, w = n ? n.charAt(1) : w, o = t ? t.charAt(0) : o, a = t ? t.charAt(1) : a, g = i || g, n = "\\" + p + "(\\" + g + ")?\\" + w, t = "\\" + o + "\\" + a, y = "(?:(?:(\\w+(?=[\\/\\s\\" + o + "]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\" + o + "]|\\" + o + "(?!\\" + a + "))*?)", l.rTag = y + ")", y = new RegExp(n + y + "(\\/)?|(?:\\/(\\w+)))" + t, "g"), at = new RegExp("<.*>|([^\\\\]|^)[{}]|" + n + ".*" + t)), [p, w, o, a, g] } function ki(n, t) { t || (t = n, n = i); var e, f, o, u, r = this, s = !t || t === "root"; if (n) { if (u = r.type === t ? r : i, !u) if (e = r.views, r._.useKey) { for (f in e) if (u = e[f].get(n, t)) break } else for (f = 0, o = e.length; !u && f < o; f++) u = e[f].get(n, t) } else if (s) while (r.parent.parent) u = r = r.parent; else while (r && !u) u = r.type === t ? r : i, r = r.parent; return u } function ni() { var n = this.get("item"); return n ? n.index : i } function ti() { return this.index } function di(t) { var f, e = this, o = e.linkCtx, r = (e.ctx || {})[t]; return r === i && o && o.ctx && (r = o.ctx[t]), r === i && (r = ei[t]), r && (typeof r != "function" || r._wrp || (f = function () { return r.apply(!this || this === n ? e : this, arguments) }, f._wrp = 1, u(f, r))), f || r } function gi(n, t, u) { var f, e, h, o = +u === u && u, s = t.linkCtx; if (o && (u = (o = t.tmpl.bnds[o - 1])(t.data, t, r)), e = u.args[0], n || o) { f = s && s.tag || { _: { inline: !s, bnd: o }, tagName: n + ":", flow: !0, _is: "tag" }; for (h in u.props) rt.test(h) && (f[h] = u.props[h]); s && (s.tag = f, f.linkCtx = f.linkCtx || s, u.ctx = c(u.ctx, s.view.ctx)); f.tagCtx = u; u.view = t; f.ctx = u.ctx || {}; delete u.ctx; t._.tag = f; e = et(f, f.convert || n !== "true" && n)[0]; e = e != i ? e : ""; e = o && t._.onRender ? t._.onRender(e, t, o) : e; t._.tag = i } return e } function et(n, t) { var r = n.tagCtx, u = r.view, i = r.args; return t = t && ("" + t === t ? u.getRsc("converters", t) || v("Unknown converter: '" + t + "'") : t), i = !i.length && !r.index && n.autoBind ? [u.data] : t ? i.slice(0) : i, t && (t.depends && (n.depends = l.getDeps(n.depends, n, t.depends, t)), i[0] = t.apply(n, i)), i } function nr(n, t) { for (var f, e, u = this; f === i && u;) e = u.tmpl[n], f = e && e[t], u = u.parent; return f || r[n][t] } function tr(n, t, f, e, o) { var ct, h, wt, at, ut, a, vt, w, l, ft, tt, bt, k, yt, pt, nt, y, st, d, kt, g = "", ht = +e === e && e, p = t.linkCtx || 0, it = t.ctx, dt = f || t.tmpl; for (n._is === "tag" && (h = n, n = h.tagName), h = h || p.tag, ht && (e = (bt = dt.bnds[ht - 1])(t.data, t, r)), vt = e.length, a = 0; a < vt; a++) { if (l = e[a], d = l.props, tt = l.tmpl, tt = l.content = tt && dt.tmpls[tt - 1], f = l.props.tmpl, a || f && h || (k = t.getRsc("tags", n) || v("Unknown tag: {{" + n + "}}")), f = f || (h ? h : k).template || tt, f = "" + f === f ? t.getRsc("templates", f) || s(f) : f, u(l, { tmpl: f, render: ot, index: a, view: t, ctx: c(l.ctx, it) }), !h) { k._ctr ? (h = new k._ctr, yt = !!h.init, h.attr = h.attr || k.attr || i) : h = { render: k.render }; h._ = { inline: !p }; p && (p.attr = h.attr = p.attr || h.attr, p.tag = h, h.linkCtx = p); (h._.bnd = bt || p.fn) ? h._.arrVws = {} : h.dataBoundOnly && v("{^{" + n + "}} tag must be data-bound"); h.tagName = n; h.parent = ut = it && it.tag; h._is = "tag"; h._def = k; for (st in d = l.props) rt.test(st) && (h[st] = d[st]) } l.tag = h; h.map && h.tagCtxs && (l.map = h.tagCtxs[a].map); h.flow || (ft = l.ctx = l.ctx || {}, wt = h.parents = ft.parentTags = it && c(ft.parentTags, it.parentTags) || {}, ut && (wt[ut.tagName] = ut), ft.tag = h) } for (h.tagCtxs = e, t._.tag = h, h.rendering = {}, a = 0; a < vt; a++) l = h.tagCtx = e[a], d = l.props, y = et(h, h.convert), (pt = d.map || h).map && (y.length || d.map) && (nt = l.map = u(l.map || { unmap: pt.unmap }, d), nt.src !== y[0] && (nt.src && nt.unmap(), pt.map.apply(nt, y)), y = [nt.tgt]), h.ctx = l.ctx, !a && yt && (kt = h.template, h.init(l, p, h.ctx), yt = i, h.template !== kt && (h._.tmpl = h.template)), w = i, ct = h.render, (ct = h.render) && (w = ct.apply(h, y)), y = y.length ? y : [t], w = w !== i ? w : l.render(y[0], !0) || (o ? i : ""), g = g ? g + (w || "") : w; return delete h.rendering, h.tagCtx = h.tagCtxs[0], h.ctx = h.tagCtx.ctx, h._.inline && (at = h.attr) && at !== b && (g = at === "text" ? lt.html(g) : ""), ht && t._.onRender ? t._.onRender(g, t, ht) : g } function nt(n, t, i, r, u, f, e, o) { var a, h, c, v = t === "array", l = { key: 0, useKey: v ? 0 : 1, id: "" + wi++, onRender: o, bnds: {} }, s = { data: r, tmpl: u, content: e, views: v ? [] : {}, parent: i, type: t, get: ki, getIndex: ti, getRsc: nr, hlp: di, _: l, _is: "view" }; return i ? (a = i.views, h = i._, h.useKey ? (a[l.key = "_" + h.useKey++] = s, s.index = vt, s.getIndex = ni, c = h.tag, l.bnd = v && (!c || !!c._.bnd && c)) : a.splice(l.key = s.index = f, 0, s), s.ctx = n || i.ctx) : s.ctx = n, s } function ir(n) { var t, i, r, u, f; for (t in k) if (u = k[t], (f = u.compile) && (i = n[t + "s"])) for (r in i) i[r] = f(r, i[r], n, t, u) } function rr(n, t, i) { var u, r; return typeof t == "function" ? t = { depends: t.depends, render: t } : ((r = t.template) && (t.template = "" + r === r ? s[r] || s(r) : r), t.init !== !1 && (u = t._ctr = function () { }, (u.prototype = t).constructor = u)), i && (t._parentTmpl = i), t } function ii(r, u, f, e, o, h) { function v(i) { if ("" + i === i || i.nodeType > 0) { try { a = i.nodeType > 0 ? i : !at.test(i) && t && t(n.document).find(i)[0] } catch (u) { } return a && (i = a.getAttribute(wt), r = r || i, i = s[i], i || (r = r || "_" + pi++, a.setAttribute(wt, r), i = s[r] = ii(r, a.innerHTML, f, e, o, h))), i } } var l, a; return u = u || "", l = v(u), h = h || (u.markup ? u : {}), h.tmplName = r, f && (h._parentTmpl = f), !l && u.markup && (l = v(u.markup)) && l.fn && (l.debug !== u.debug || l.allowCode !== u.allowCode) && (l = l.markup), l !== i ? (r && !f && (ut[r] = function () { return u.render.apply(u, arguments) }), l.fn || u.fn ? l.fn && (u = r && r !== l.tmplName ? c(h, l) : l) : (u = ri(l, h), st(l.replace(ci, "\\$&"), u)), ir(h), u) : void 0 } function ri(n, t) { var i, o = e.wrapMap || {}, r = u({ markup: n, tmpls: [], links: {}, tags: {}, bnds: [], _is: "template", render: ot }, t); return t.htmlTag || (i = vi.exec(n), r.htmlTag = i ? i[1].toLowerCase() : ""), i = o[r.htmlTag], i && i !== o.div && (r.markup = f.trim(r.markup)), r } function ur(n, t) { function u(e, o, s) { var a, h, v, c; if (e && "" + e !== e && !e.nodeType && !e.markup) { for (v in e) u(v, e[v], o); return r } return o === i && (o = e, e = i), e && "" + e !== e && (s = o, o = e, e = i), c = s ? s[f] = s[f] || {} : u, h = t.compile, (a = l.onBeforeStoreItem) && (h = a(c, e, o, h) || h), e ? o === null ? delete c[e] : c[e] = h ? o = h(e, o, s, n, t) : o : o = h(i, o), h && o && (o._is = n), (a = l.onStoreItem) && a(c, e, o, h), o } var f = n + "s"; r[f] = u; k[n] = t } function ot(n, t, u, e, o, h) { var w, et, tt, y, it, rt, ut, k, p, ft, d, ot, l, a = this, st = !a.attr || a.attr === b, g = ""; if (!!t === t && (u = t, t = i), o === !0 && (ut = !0, o = 0), a.tag ? (k = a, a = a.tag, ft = a._, ot = a.tagName, l = ft.tmpl || k.tmpl, t = c(t, a.ctx), p = k.content, k.props.link === !1 && (t = t || {}, t.link = !1), e = e || k.view, n = arguments.length ? n : e) : l = a.jquery && (a[0] || v('Unknown template: "' + a.selector + '"')) || a, l && (!e && n && n._is === "view" && (e = n), e && (p = p || e.content, h = h || e._.onRender, n === e && (n = e.data), t = c(t, e.ctx)), e && e.data !== i || ((t = t || {}).root = n), l.fn || (l = s[l] || s(l)), l)) { if (h = (t && t.link) !== !1 && st && h, d = h, h === !0 && (d = i, h = e._.onRender), t = l.helpers ? c(l.helpers, t) : t, f.isArray(n) && !u) for (y = ut ? e : o !== i && e || nt(t, "array", e, n, l, o, p, h), w = 0, et = n.length; w < et; w++) tt = n[w], it = nt(t, "item", y, tt, l, (o || 0) + w, p, h), rt = l.fn(tt, it, r), g += y._.onRender ? y._.onRender(rt, it) : rt; else y = ut ? e : nt(t, ot || "data", e, n, l, o, p, h), ft && !a.flow && (y.tag = a), g += l.fn(n, y, r); return d ? d(g, y) : g } return "" } function v(n) { throw new l.Error(n); } function h(n) { v("Syntax error\n" + n) } function st(n, t, i, r) { function v(t) { t -= f; t && s.push(n.substr(f, t).replace(it, "\\n")) } function c(t) { t && h('Unmatched or missing tag: "{{/' + t + '}}" in template:\n' + n) } function p(e, y, p, k, d, g, nt, tt, ut, ft, et, ot) { g && (d = ":", k = b); ft = ft || i; var pt, lt, at = y && [], ct = "", st = "", vt = "", yt = !ft && !d && !nt; p = p || (ut = ut || "#data", d); v(ot); f = ot + e.length; tt ? w && s.push(["*", "\n" + ut.replace(hi, "$1") + "\n"]) : p ? (p === "else" && (ai.test(ut) && h('for "{{else if expr}}" use "{{else expr}}"'), at = u[6], u[7] = n.substring(u[7], ot), u = o.pop(), s = u[3], yt = !0), ut && (ut = ut.replace(it, " "), ct = ht(ut, at, t).replace(li, function (n, t, i) { return t ? vt += i + "," : st += i + ",", a = a || rt.test(i.split(":")[0]), "" })), st = st.slice(0, -1), ct = ct.slice(0, -1), pt = st && st.indexOf("noerror:true") + 1 && st || "", l = [p, k || !!r || a || "", ct, yt && [], '\n\tparams:"' + ut + '",\n\tprops:{' + st + "}" + (vt ? ",ctx:{" + vt.slice(0, -1) + "}" : ""), pt, at || 0], s.push(l), yt && (o.push(u), u = l, u[7] = f)) : et && (lt = u[0], c(et !== lt && lt !== "else" && et), u[7] = n.substring(u[7], ot), u = o.pop()); c(!u && et); s = u[3] } var l, a, w = t && t.allowCode, e = [], f = 0, o = [], s = e, u = [, , , e]; return c(o[0] && o[0][3].pop()[0]), n.replace(y, p), v(n.length), (f = e[e.length - 1]) && c("" + f !== f && +f[7] === f[7] && f[0]), ui(e, i ? n : t, i) } function ui(n, i, r) { var a, f, o, l, v, p, ht, ct, lt, at, et, w, s, ot, y, tt, k, rt, vt, d, yt, pt, st, ut, g, c = 0, u = "", nt = "", ft = {}, wt = n.length; for ("" + i === i ? (y = r ? 'data-link="' + i.replace(it, " ").slice(1, -1) + '"' : i, i = 0) : (y = i.tmplName || "unnamed", i.allowCode && (ft.allowCode = !0), i.debug && (ft.debug = !0), w = i.bnds, ot = i.tmpls), a = 0; a < wt; a++) if (f = n[a], "" + f === f) u += '\nret+="' + f + '";'; else if (o = f[0], o === "*") u += "" + f[1]; else { if (l = f[1], v = f[2], rt = f[3], p = f[4], nt = f[5], vt = f[7], (pt = o === "else") || (c = 0, w && (s = f[6]) && (c = w.push(s))), (st = o === ":") ? (l && (o = l === b ? ">" : l + o), nt && (ut = "prm" + a, nt = "try{var " + ut + "=[" + v + "][0];}catch(e){" + ut + '="";}\n', v = ut)) : (rt && (tt = ri(vt, ft), tt.tmplName = y + "/" + o, ui(rt, tt), ot.push(tt)), pt || (k = o, yt = u, u = ""), d = n[a + 1], d = d && d[0] === "else"), p += ",\n\targs:[" + v + "]}", st && (s || l && l !== b)) { if (g = new Function("data,view,j,u", " // " + y + " " + c + " " + o + "\n" + nt + "return {" + p + ";"), g.paths = s, g._ctxs = o, r) return g; et = 1 } if (u += st ? "\n" + (s ? "" : nt) + (r ? "return " : "ret+=") + (et ? (et = 0, at = !0, 'c("' + l + '",view,' + (s ? (w[c - 1] = g, c) : "{" + p) + ");") : o === ">" ? (ct = !0, "h(" + v + ");") : (lt = !0, "(v=" + v + ")!=" + (r ? "=" : "") + 'u?v:"";')) : (ht = !0, "{view:view,tmpl:" + (rt ? ot.length : "0") + "," + p + ","), k && !d) { if (u = "[" + u.slice(0, -1) + "]", (r || s) && (u = new Function("data,view,j,u", " // " + y + " " + c + " " + k + "\nreturn " + u + ";"), s && ((w[c - 1] = u).paths = s), u._ctxs = o, r)) return u; u = yt + '\nret+=t("' + k + '",view,this,' + (c || u) + ");"; s = 0; k = 0 } } u = "// " + y + "\nvar j=j||" + (t ? "jQuery." : "js") + "views" + (lt ? ",v" : "") + (ht ? ",t=j._tag" : "") + (at ? ",c=j._cnvt" : "") + (ct ? ",h=j.converters.html" : "") + (r ? ";\n" : ',ret="";\n') + (e.tryCatch ? "try{\n" : "") + (ft.debug ? "debugger;" : "") + u + (r ? "\n" : "\nreturn ret;\n") + (e.tryCatch ? "\n}catch(e){return j._err(e);}" : ""); try { u = new Function("data,view,j,u", u) } catch (bt) { h("Compiled template code:\n\n" + u, bt) } return i && (i.fn = u), u } function ht(n, t, i) { function b(b, k, d, g, nt, tt, it, rt, ut, ft, et, ot, ct, lt, at, vt, yt, pt, wt, bt) { function dt(n, i, r, f, e, o, h, l) { if (r && (t && (u === "linkTo" && (s = t._jsvto = t._jsvto || [], s.push(nt)), (!u || c) && t.push(nt.slice(i.length))), r !== ".")) { var a = (f ? 'view.hlp("' + f + '")' : e ? "view" : "data") + (l ? (o ? "." + o : f ? "" : e ? "" : "." + r) + (h || "") : (l = f ? "" : e ? o || "" : r, "")); return a = a + (l ? "." + l : ""), i + (a.slice(0, 9) === "view.data" ? a.slice(5) : a) } return n } var kt; if (tt = tt || "", d = d || k || ot, nt = nt || ut, ft = ft || yt || "", !it || e || f) return t && vt && !e && !f && (!u || c || s) && (kt = v[r], bt.length - 1 > wt - kt && (kt = bt.slice(kt, wt + 1), vt = w + ":" + kt + o, vt = y[vt] = y[vt] || st(p + vt + a, i, !0), vt.paths || ht(kt, vt.paths = [], i), (s || t).push({ _jsvOb: vt }))), e ? (e = !ct, e ? b : '"') : f ? (f = !lt, f ? b : '"') : (d ? (r++, v[r] = wt++, d) : "") + (pt ? r ? "" : u ? (u = c = s = !1, "\b") : "," : rt ? (r && h(n), u = nt, c = g, "\b" + nt + ":") : nt ? nt.split("^").join(".").replace(oi, dt) + (ft ? (l[++r] = !0, nt.charAt(0) !== "." && (v[r] = wt), ft) : tt) : tt ? tt : at ? (l[r--] = !1, at) + (ft ? (l[++r] = !0, ft) : "") : et ? (l[r] || h(n), ",") : k ? "" : (e = ct, f = lt, '"')); h(n) } var u, s, c, y = i.links, l = {}, v = { 0: -1 }, r = 0, f = !1, e = !1; return (n + " ").replace(/\)\^/g, ").").replace(si, b) } function c(n, t) { return n && n !== t ? t ? u(u({}, t), n) : n : t && u({}, t) } function fi(n) { return pt[n] || (pt[n] = "&#" + n.charCodeAt(0) + ";") } function fr(n) { var i, t, r = []; if (typeof n == "object") for (i in n) t = n[i], t && t.toJSON && !t.toJSON() || typeof t != "function" && r.push({ key: i, prop: n[i] }); return r } if ((!t || !t.views) && !n.jsviews) { var f, tt, y, at, vt, p = "{", w = "{", o = "}", a = "}", g = "^", oi = /^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g, si = /(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g, it = /[ \t]*(\r\n|\n|\r)/g, hi = /\\(['"])/g, ci = /['"\\]/g, li = /\x08(~)?([^\x08]+)\x08/g, ai = /^if\s/, vi = /<(\w+)[>\s]/, yt = /[\x00`><"'&]/g, rt = /^on[A-Z]|^convert(Back)?$/, yi = yt, pi = 0, wi = 0, pt = { "&": "&amp;", "<": "&lt;", ">": "&gt;", "\x00": "&#0;", "'": "&#39;", '"': "&#34;", "`": "&#96;" }, b = "html", wt = "data-jsv-tmpl", ut = {}, k = { template: { compile: ii }, tag: { compile: rr }, helper: {}, converter: {} }, r = { jsviews: "v1.0.0-beta", render: ut, settings: function (n) { u(e, n); kt(e._dbgMode); e.jsv && e.jsv() }, sub: { View: nt, Error: ft, tmplFn: st, cvt: et, parse: ht, extend: u, error: v, syntaxError: h, DataMap: dt }, _cnvt: gi, _tag: tr, _err: function (n) { return e._dbgMode ? "Error: " + (n.message || n) + ". " : "" } }; (ft.prototype = new Error).constructor = ft; ni.depends = function () { return [this.get("item"), "index"] }; ti.depends = function () { return ["index"] }; for (tt in k) ur(tt, k[tt]); var ct, s = r.templates, lt = r.converters, ei = r.helpers, d = r.tags, l = r.sub, e = r.settings; t ? (f = t, f.fn.render = ot, (ct = f.observable) && (u(l, ct.sub), delete ct.sub)) : (f = n.jsviews = {}, f.isArray = Array && Array.isArray || function (n) { return Object.prototype.toString.call(n) === "[object Array]" }); f.render = ut; f.views = r; f.templates = s = r.templates; e({ debugMode: kt, delimiters: gt, _dbgMode: !0, tryCatch: !0 }); d({ "else": function () { }, "if": { render: function (n) { var t = this; return t.rendering.done || !n && (arguments.length || !t.tagCtx.index) ? "" : (t.rendering.done = !0, t.selected = t.tagCtx.index, t.tagCtx.render(t.tagCtx.view, !0)) }, onUpdate: function (n, t, i) { for (var r, f, u = 0; (r = this.tagCtxs[u]) && r.args.length; u++) if (r = r.args[0], f = !r != !i[u].args[0], !this.convert && !!r || f) return f; return !1 }, flow: !0 }, "for": { render: function (n) { var u, t = this, r = t.tagCtx, e = "", o = 0; return t.rendering.done || ((u = !arguments.length) && (n = r.view.data), n !== i && (e += r.render(n, u), o += f.isArray(n) ? n.length : 1), (t.rendering.done = o) && (t.selected = r.index)), e }, flow: !0, autoBind: !0 }, include: { flow: !0, autoBind: !0 }, "*": { render: bt, flow: !0 } }); d({ props: u(u({}, d["for"]), dt(fr)) }); d.props.autoBind = !0; lt({ html: function (n) { return n != i ? String(n).replace(yi, fi) : "" }, attr: function (n) { return n != i ? String(n).replace(yt, fi) : n === null ? n : "" }, url: function (n) { return n != i ? encodeURI(String(n)) : n === null ? n : "" } }); gt() } })(this, this.jQuery);

$.views.settings.delimiters("{{", "}}");

(function ($) {
    $.fn.getComments = function () {
        var result,
		$el = $(this).contents();
        result = $el.filter(function () {
            return this.nodeType == 8;
        });
        if (result.length > 0)
            return result[0].data;
        else
            return '';
    };
})(jQuery);

(function ($) {
    $.fn.quickJsRender = function (data) {
        $el = $(this);
        var tmplText = $el.getComments();
        var tmpl = $.templates(tmplText);
        $el.html(
		    tmpl.render(data)
        );
    };
})(jQuery);

(function ($) {
    $.fn.disableSelection = function () {
        return this
                 .attr('unselectable', 'on')
                 .css('user-select', 'none')
                 .on('selectstart', false);
    };
})(jQuery);

// jquery.browser
(function (jQuery) {
    var matched,
		userAgent = navigator.userAgent || "";

    // Use of jQuery.browser is frowned upon.
    // More details: http://api.jquery.com/jQuery.browser
    // jQuery.uaMatch maintained for back-compat
    jQuery.uaMatch = function (ua) {
        ua = ua.toLowerCase();

        var match = /(chrome)[ \/]([\w.]+)/.exec(ua) ||
			/(webkit)[ \/]([\w.]+)/.exec(ua) ||
			/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(ua) ||
			/(msie) ([\w.]+)/.exec(ua) ||
			ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+))?/.exec(ua) ||
			[];

        var realBrowser = match[1] || "";
        var version = match[2] || "0";
        var realVersion = version;
        var ieDetection = /(?:trident\/)(\d+)/; // 修正IE11，及兼容模式下检测真实浏览器版本
        var ieMatch = ieDetection.exec(ua);
        if (ieMatch != null) {
            realBrowser = 'msie';
            var tv = ieMatch[1];
            if (parseInt(version) >= 7) { // IE6也是Trident/4.0
                realVersion = parseInt(tv) + 4;
            }
        }

        return {
            browser: realBrowser,
            version: version,
            realVersion: realVersion
        };
    };

    matched = jQuery.uaMatch(userAgent);

    jQuery.browser = {};

    if (matched.browser) {
        jQuery.browser[matched.browser] = true;
        jQuery.browser.version = matched.version;
        jQuery.browser.realVersion = matched.realVersion;
    }

    // Deprecated, use jQuery.browser.webkit instead
    // Maintained for back-compat only
    if (jQuery.browser.webkit) {
        jQuery.browser.safari = true;
    }

}(jQuery));


/*
* jQuery hashchange event - v1.3 - 7/21/2010
* http://benalman.com/projects/jquery-hashchange-plugin/
*/
(function ($, e, b) { var c = "hashchange", h = document, f, g = $.event.special, i = h.documentMode, d = "on" + c in e && (i === b || i > 7); function a(j) { j = j || location.href; return "#" + j.replace(/^[^#]*#?(.*)$/, "$1") } $.fn[c] = function (j) { return j ? this.bind(c, j) : this.trigger(c) }; $.fn[c].delay = 50; g[c] = $.extend(g[c], { setup: function () { if (d) { return false } $(f.start) }, teardown: function () { if (d) { return false } $(f.stop) } }); f = (function () { var j = {}, p, m = a(), k = function (q) { return q }, l = k, o = k; j.start = function () { p || n() }; j.stop = function () { p && clearTimeout(p); p = b }; function n() { var r = a(), q = o(m); if (r !== m) { l(m = r, q); $(e).trigger(c) } else { if (q !== m) { location.href = location.href.replace(/#.*/, "") + q } } p = setTimeout(n, $.fn[c].delay) } $.browser.msie && !d && (function () { var q, r; j.start = function () { if (!q) { r = $.fn[c].src; r = r && r + a(); q = $('<iframe tabindex="-1" title="empty"/>').hide().one("load", function () { r || l(a()); n() }).attr("src", r || "javascript:0").insertAfter("body")[0].contentWindow; h.onpropertychange = function () { try { if (event.propertyName === "title") { q.document.title = h.title } } catch (s) { } } } }; j.stop = k; o = function () { return a(q.location.href) }; l = function (v, s) { var u = q.document, t = $.fn[c].domain; if (v !== s) { u.title = h.title; u.open(); t && u.write('<script>document.domain="' + t + '"<\/script>'); u.close(); q.location.hash = v } } })(); return j })() })(jQuery, this);


/*
Plugin: iframe autoheight jQuery Plugin
Version: 1.9.3
Description: when the page loads set the height of an iframe based on the height of its contents
see README: http://github.com/house9/jquery-iframe-auto-height 
*/
!function (e) { e.fn.iframeAutoHeight = function (t) { function i(e) { s.debug && s.debug === !0 && window.console && console.log(e) } function n(t, n) { i("Diagnostics from '" + n + "'"); try { i("  " + e(t, window.top.document).contents().find("body")[0].scrollHeight + " for ...find('body')[0].scrollHeight"), i("  " + e(t.contentWindow.document).height() + " for ...contentWindow.document).height()"), i("  " + e(t.contentWindow.document.body).height() + " for ...contentWindow.document.body).height()") } catch (r) { i("  unable to check in this state") } i("End diagnostics -> results vary by browser and when diagnostics are requested") } var r; if (e.browser === r) { var o = []; return o.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable."), o.push("The jQuery iframe auto height plugin relies heavly on the $.browser features."), o.push("Install jquery-browser: https://raw.github.com/house9/jquery-iframe-auto-height/master/release/jquery.browser.js"), alert(o.join("\n")), e } var s = e.extend({ heightOffset: 0, minHeight: 0, callback: function () { }, animate: !1, debug: !1, diagnostics: !1, resetToMinHeight: !1, triggerFunctions: [], heightCalculationOverrides: [] }, t); return i(s), this.each(function () { function t(e) { var t = null; return jQuery.each(o, function (i, n) { return e[n] ? (t = h[n], !1) : void 0 }), null === t && (t = h["default"]), t } function r(r) { s.diagnostics && n(r, "resizeHeight"), s.resetToMinHeight && s.resetToMinHeight === !0 && (r.style.height = s.minHeight + "px"); var o = e(r, window.top.document).contents().find("body"), h = t(e.browser), a = h(r, o, s, e.browser); i(a), a < s.minHeight && (i("new height is less than minHeight"), a = s.minHeight + s.heightOffset), i("New Height: " + a), s.animate ? e(r).animate({ height: a + "px" }, { duration: 500 }) : r.style.height = a + "px", s.callback.apply(e(r), [{ newFrameHeight: a }]) } var o = ["webkit", "mozilla", "msie", "opera"], h = []; h["default"] = function (e, t, i) { return t[0].scrollHeight + i.heightOffset }, jQuery.each(o, function (e, t) { h[t] = h["default"] }), jQuery.each(s.heightCalculationOverrides, function (e, t) { h[t.browser] = t.calculation }); var a = 0; if (i(this), s.diagnostics && n(this, "each iframe"), s.triggerFunctions.length > 0) { i(s.triggerFunctions.length + " trigger Functions"); for (var u = 0; u < s.triggerFunctions.length; u++) s.triggerFunctions[u](r, this) } if (e.browser.webkit || e.browser.opera) { i("browser is webkit or opera"), e(this).load(function () { var e = 0, t = this, n = function () { r(t) }; 0 === a ? e = 500 : t.style.height = s.minHeight + "px", i("load delay: " + e), setTimeout(n, e), a++ }); var c = e(this).attr("src"); e(this).attr("src", ""), e(this).attr("src", c) } else e(this).load(function () { r(this) }) }) } }(jQuery);;

//initAjaxErrorHandler();
function initAjaxErrorHandler() {
    $.ajaxSetup({
        error: function (xhr, e) {
            var msg = buildAjaxErrorMsg(xhr, e);
            alert(msg);
        }
    });
}

function buildAjaxErrorMsg(xhr, e) {
    var msg = '';
    var responseText = xhr.responseText;
    var shortResponseText = "";

    if (typeof (responseText) != "undefined" && responseText && responseText != "") {
        regEx = /(?:<title.*?>)(.*?)(?=<\/title>)/ig;
        var match = regEx.exec(responseText);
        if (match != null && match.length >= 2) {
            shortResponseText = match[1];
        }
        else if (responseText.length > 200) {
            shortResponseText = responseText.substr(0, 200);
        }
        else {
            shortResponseText = responseText;
        }
    }

    //if (xhr.status == 0) {
        // 网络连接失败，或者主动调用了Abort，都有这个提示
        //msg = 'Code: ' + xhr.status + ', Message: ' + shortResponseText + ', Event: ' + e; 
    //}
    if (xhr.status == 404) {
        msg = '404: 请求的地址已不存在';
    }
    else if (xhr.status == 500) {
        msg = '500: 服务器组件异常，' + shortResponseText;
    }
    else if (xhr.status == 501) {
        var serverEx = xhr.getResponseHeader('AjaxException');
        if (serverEx == '1')
            msg = '501: 服务器应用程序异常，' + shortResponseText;
        else
            msg = '501: 服务器异常' + shortResponseText;
    }
    else if (xhr.status == 12029) {
        msg = '网络连接失败，请刷新页面，如多次失败请检查网络';
    }
    else if (e == 'parsererror') {
        msg = 'JSON 数据解析错误';
    }
    else if (e == 'timeout') {
        msg = '服务器响应超时';
    }
    else if (e == 'abort') {
        msg = '请求终止';
    }
    else {
        msg = 'Code: ' + xhr.status + ', Message: ' + shortResponseText + ', Event: ' + e;
    }

    return { errorMessage: msg, responseText: xhr.responseText, statusCode: xhr.status };
}
